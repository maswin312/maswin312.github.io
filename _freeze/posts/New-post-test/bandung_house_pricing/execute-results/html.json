{
  "hash": "86b952ada93cfb7eb4722258a950f3df",
  "result": {
    "markdown": "---\ntitle: Bandung House Pricing\nauthor: Windaru\ndate: '2023-04-16'\ncategories:\n  - code\n---\n\nPhoto by <a href=\"https://unsplash.com/@neermana?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">Neermana Studio</a> on <a href=\"https://unsplash.com/photos/SYKYxuT2o5w?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">Unsplash</a>\n\n![](neermana-studio-SYKYxuT2o5w-unsplash (1).jpg)  \n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nfrom sklearn.datasets import make_regression\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.preprocessing import OneHotEncoder\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport seaborn as sns\nfrom sklearn.compose import ColumnTransformer\n```\n:::\n\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\npd.set_option('display.max_colwidth', 255)\n```\n:::\n\n\n# BACKGROUND\n\n\nMachine learning project ini digunakan untuk memprediksi harga rumah yang dijual di kota bandung dan sekitarnya, data yang digunakan di scrape dari web OLX indonesia, project ini bertujuan untuk memperkirakan harga rumah yang dijual berdasarkan beberapa kriteria yang dimasukkan oleh penjual rumah di web OLX\n\n## Who is this for?\n\nWarga atau agen perumahan yang memerlukan referensi untuk menentukan harga rumah yang akan dijual\n\n# Dataset\n\nDataset yang digunakan adalah hasil scrape menggunakan selenium + python, script python untuk scraping dapat ditemukan disini :  https://github.com/maswin312/selenium_srape_olx/blob/main/Scraping%20OLX.ipynb\nHasil scrape disimpan di drive untuk memudahkan proses \n\n# Data Cleaning\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\nbandung = pd.read_csv('https://docs.google.com/spreadsheets/d/e/2PACX-1vTAR6OtAl_QcmB5_YkJ6M_YTifhCd5Z1gJtoXFJoaPJWcL5fh5n2DnHRIanJBMOOLF5WRjprZXQP-c7/pub?gid=853666521&single=true&output=csv')\nbandung\n```\n\n::: {.cell-output .cell-output-display execution_count=84}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>link</th>\n      <th>price</th>\n      <th>sqr_building</th>\n      <th>sqr_land</th>\n      <th>bedroom</th>\n      <th>bathroom</th>\n      <th>floor</th>\n      <th>facility</th>\n      <th>certificate</th>\n      <th>Kecamatan</th>\n      <th>Kabupaten</th>\n      <th>Provinsi</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>https://www.olx.co.id/item/perumahan-cicilan-dan-dp-fleksibel-di-bandung-barat-112146154-iid-887029061</td>\n      <td>554006154</td>\n      <td>50</td>\n      <td>615460</td>\n      <td>3</td>\n      <td>2</td>\n      <td>2.0</td>\n      <td>Carport, Garden</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Cibeunying Kidul</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>https://www.olx.co.id/item/perumahan-syariah-10-menit-keikea-kotabaru-parahyangan-112136153-iid-887028704</td>\n      <td>554006153</td>\n      <td>50</td>\n      <td>615360</td>\n      <td>3</td>\n      <td>2</td>\n      <td>2.0</td>\n      <td>Carport, Garden</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Cibeunying Kidul</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>https://www.olx.co.id/item/rumah-mewah-500jtan-dekat-stkereta-cepat-bdg-jkt-112116151-iid-887028338</td>\n      <td>554006152</td>\n      <td>30</td>\n      <td>615260</td>\n      <td>3</td>\n      <td>2</td>\n      <td>2.0</td>\n      <td>Carport, Garden</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Cibeunying Kaler</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>https://www.olx.co.id/item/rumah-pembangunan-cepat-setelah-akad-langsung-bangun-112116151-iid-887028078</td>\n      <td>554006151</td>\n      <td>50</td>\n      <td>615160</td>\n      <td>3</td>\n      <td>2</td>\n      <td>2.0</td>\n      <td>Carport, Garden</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Cibeunying Kaler</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>https://www.olx.co.id/item/perumahan-strategis-dekat-exit-tol-padalarang-112106150-iid-887027161</td>\n      <td>390006150</td>\n      <td>30</td>\n      <td>615060</td>\n      <td>2</td>\n      <td>1</td>\n      <td>1.0</td>\n      <td>Carport, Garden</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Buahbatu (Margacinta)</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>510</th>\n      <td>https://www.olx.co.id/item/rukorumah-pinggir-jalan-raya-iid-876860375</td>\n      <td>680000000</td>\n      <td>60</td>\n      <td>30</td>\n      <td>2</td>\n      <td>1</td>\n      <td>2.0</td>\n      <td>NaN</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Cimahi Selatan</td>\n      <td>Cimahi Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>511</th>\n      <td>https://www.olx.co.id/item/rumah-murah-siap-huni-iid-878362849</td>\n      <td>100000000</td>\n      <td>21</td>\n      <td>30</td>\n      <td>1</td>\n      <td>1</td>\n      <td>1.0</td>\n      <td>NaN</td>\n      <td>Lainnya (PPJB, Girik, Adat, dll)</td>\n      <td>Dayeuhkolot</td>\n      <td>Bandung Kab.</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>512</th>\n      <td>https://www.olx.co.id/item/rumah-sederhana-area-mohtoha-bandung-murah-layak-siap-huni-iid-886990373</td>\n      <td>195000000</td>\n      <td>45</td>\n      <td>28</td>\n      <td>2</td>\n      <td>1</td>\n      <td>2.0</td>\n      <td>NaN</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Astana Anyar</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>513</th>\n      <td>https://www.olx.co.id/item/rumah-murah-sederhana-dalam-gang-karasak-moh-toha-iid-886990013</td>\n      <td>170000000</td>\n      <td>24</td>\n      <td>24</td>\n      <td>1</td>\n      <td>1</td>\n      <td>1.0</td>\n      <td>NaN</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Astana Anyar</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>514</th>\n      <td>https://www.olx.co.id/item/miliki-sekarang-rumah-berkualitas-dengan-promo-mulai-dari-100-jtan-iid-887010808</td>\n      <td>135000112</td>\n      <td>36</td>\n      <td>20</td>\n      <td>2</td>\n      <td>1</td>\n      <td>1.0</td>\n      <td>Garasi, Garden, Gordyn, PAM</td>\n      <td>Lainnya (PPJB, Girik, Adat, dll)</td>\n      <td>Buahbatu (Margacinta)</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n  </tbody>\n</table>\n<p>515 rows × 12 columns</p>\n</div>\n```\n:::\n:::\n\n\n::: {.cell execution_count=4}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\n\nfor column in bandung.select_dtypes(exclude=['object']):\n        plt.figure(figsize=(17,1))\n        sns.boxplot(data=bandung, x=column)\n```\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-5-output-1.png){width=1289 height=134}\n:::\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-5-output-2.png){width=1289 height=134}\n:::\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-5-output-3.png){width=1289 height=134}\n:::\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-5-output-4.png){width=1289 height=134}\n:::\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-5-output-5.png){width=1289 height=134}\n:::\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-5-output-6.png){width=1289 height=134}\n:::\n:::\n\n\nData harga memiliki beberapa outlier, berupa harga rumah yang terlalu tinggi, atau luas tanah yang lerlalu luas, kita akan singkirkan data - data tersebut,\nselanjutnya kita akan mengecek jumlah data yang kita miliki per kecamatan\n\n::: {.cell execution_count=5}\n``` {.python .cell-code}\nbandung.groupby([\"Kecamatan\"])[\"price\"].agg(\"count\").reset_index().sort_values(\n    \"price\",\n    ascending=False,\n)\n```\n\n::: {.cell-output .cell-output-display execution_count=86}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Kecamatan</th>\n      <th>price</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>13</th>\n      <td>Buahbatu (Margacinta)</td>\n      <td>112</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Antapani (Cicadas)</td>\n      <td>88</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>Batununggal</td>\n      <td>44</td>\n    </tr>\n    <tr>\n      <th>36</th>\n      <td>Sukajadi</td>\n      <td>31</td>\n    </tr>\n    <tr>\n      <th>24</th>\n      <td>Coblong</td>\n      <td>24</td>\n    </tr>\n    <tr>\n      <th>38</th>\n      <td>Sumur Bandung</td>\n      <td>18</td>\n    </tr>\n    <tr>\n      <th>29</th>\n      <td>Lengkong</td>\n      <td>13</td>\n    </tr>\n    <tr>\n      <th>35</th>\n      <td>Regol</td>\n      <td>13</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>Bandung Kidul</td>\n      <td>12</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>Cibeunying Kaler</td>\n      <td>12</td>\n    </tr>\n    <tr>\n      <th>21</th>\n      <td>Cimahi Utara</td>\n      <td>12</td>\n    </tr>\n    <tr>\n      <th>0</th>\n      <td>Andir</td>\n      <td>11</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>Bojongloa Kidul</td>\n      <td>11</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>Cibeunying Kidul</td>\n      <td>10</td>\n    </tr>\n    <tr>\n      <th>28</th>\n      <td>Kiaracondong</td>\n      <td>9</td>\n    </tr>\n    <tr>\n      <th>17</th>\n      <td>Cicendo</td>\n      <td>8</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>Bojongloa Kaler</td>\n      <td>8</td>\n    </tr>\n    <tr>\n      <th>32</th>\n      <td>Margahayu</td>\n      <td>7</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Astana Anyar</td>\n      <td>7</td>\n    </tr>\n    <tr>\n      <th>34</th>\n      <td>Rancasari</td>\n      <td>6</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Arcamanik</td>\n      <td>6</td>\n    </tr>\n    <tr>\n      <th>20</th>\n      <td>Cimahi Tengah</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>Bandung Wetan</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>Bojongsoang</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>19</th>\n      <td>Cimahi Selatan</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>25</th>\n      <td>Dago</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>22</th>\n      <td>Cimeunyan</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>30</th>\n      <td>Mandalajati</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>37</th>\n      <td>Sukasari</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>Baleendah</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>31</th>\n      <td>Margaasih</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>Cibiru</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>39</th>\n      <td>Ujung Berung</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>33</th>\n      <td>Panyileukan</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>Bandung Kulon</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>23</th>\n      <td>Cinambo</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>18</th>\n      <td>Cidadap</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>27</th>\n      <td>Gedebage</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>26</th>\n      <td>Dayeuhkolot</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Babakan Ciparay</td>\n      <td>1</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nBeberapa daerah hanya memiliki beberapa listing/data, karena terlalu sedikit, kita hanya akan gunakan daerah yang memiliki listing/data lebih dari 10 listing/data\n\n::: {.cell execution_count=6}\n``` {.python .cell-code}\n#remove floor = 0, land and price too big\n\nbandung_clean =  bandung[bandung['floor'] > 0]\nbandung_clean = bandung_clean[bandung_clean['sqr_land'] < 10000 ]\nbandung_clean = bandung_clean[bandung_clean['price'] < 3000000000 ]\nbandung_clean['price'] = bandung_clean['price']/1000000\nbandung_clean.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=87}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>link</th>\n      <th>price</th>\n      <th>sqr_building</th>\n      <th>sqr_land</th>\n      <th>bedroom</th>\n      <th>bathroom</th>\n      <th>floor</th>\n      <th>facility</th>\n      <th>certificate</th>\n      <th>Kecamatan</th>\n      <th>Kabupaten</th>\n      <th>Provinsi</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>17</th>\n      <td>https://www.olx.co.id/item/di-jual-rumah-tengah-kota-iid-887018521</td>\n      <td>370.0</td>\n      <td>60</td>\n      <td>702</td>\n      <td>2</td>\n      <td>1</td>\n      <td>2.0</td>\n      <td>Carport</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Bojongloa Kaler</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>24</th>\n      <td>https://www.olx.co.id/item/rumah-cijawura-girang-dekat-uninus-rs-edelweis-iid-882027794</td>\n      <td>2900.0</td>\n      <td>250</td>\n      <td>425</td>\n      <td>10</td>\n      <td>4</td>\n      <td>2.0</td>\n      <td>Carport, Garasi, Garden, Gordyn, PAM, Telephone</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Antapani (Cicadas)</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>30</th>\n      <td>https://www.olx.co.id/item/dijual-rumah-asri-daerah-bandung-iid-886886940</td>\n      <td>2400.0</td>\n      <td>150</td>\n      <td>398</td>\n      <td>3</td>\n      <td>1</td>\n      <td>2.0</td>\n      <td>Garasi, Garden, Carport</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Buahbatu (Margacinta)</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>35</th>\n      <td>https://www.olx.co.id/item/rumah-luas-asri-strategis-aman-banjir-iid-884663363</td>\n      <td>2000.0</td>\n      <td>320</td>\n      <td>352</td>\n      <td>4</td>\n      <td>3</td>\n      <td>1.0</td>\n      <td>Carport, Garasi, Garden, Gordyn</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Buahbatu (Margacinta)</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>38</th>\n      <td>https://www.olx.co.id/item/jual-kos-kosan-dan-rumah-tinggal-iid-884522159</td>\n      <td>1950.0</td>\n      <td>280</td>\n      <td>338</td>\n      <td>12</td>\n      <td>10</td>\n      <td>2.0</td>\n      <td>Garasi</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Panyileukan</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n::: {.cell execution_count=7}\n``` {.python .cell-code}\nfor column in bandung_clean.select_dtypes(exclude=['object']):\n        plt.figure(figsize=(17,1))\n        sns.boxplot(data=bandung_clean, x=column)\n```\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-8-output-1.png){width=1289 height=134}\n:::\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-8-output-2.png){width=1289 height=134}\n:::\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-8-output-3.png){width=1289 height=134}\n:::\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-8-output-4.png){width=1289 height=134}\n:::\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-8-output-5.png){width=1289 height=134}\n:::\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-8-output-6.png){width=1289 height=134}\n:::\n:::\n\n\n::: {.cell execution_count=8}\n``` {.python .cell-code}\n#remove kecamatan with listing < 10\n\nbandung_clean_agg = bandung_clean.groupby([\"Kecamatan\"])[\"price\"].agg(\"count\").reset_index().sort_values(\n    \"price\",\n    ascending=False,\n)\nkecamatans = bandung_clean_agg[bandung_clean_agg['price']>= 10]['Kecamatan']\nbandung_clean_kec = bandung_clean[bandung_clean['Kecamatan'].isin(kecamatans)]\nbandung_clean_kec.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=89}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>link</th>\n      <th>price</th>\n      <th>sqr_building</th>\n      <th>sqr_land</th>\n      <th>bedroom</th>\n      <th>bathroom</th>\n      <th>floor</th>\n      <th>facility</th>\n      <th>certificate</th>\n      <th>Kecamatan</th>\n      <th>Kabupaten</th>\n      <th>Provinsi</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>24</th>\n      <td>https://www.olx.co.id/item/rumah-cijawura-girang-dekat-uninus-rs-edelweis-iid-882027794</td>\n      <td>2900.0</td>\n      <td>250</td>\n      <td>425</td>\n      <td>10</td>\n      <td>4</td>\n      <td>2.0</td>\n      <td>Carport, Garasi, Garden, Gordyn, PAM, Telephone</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Antapani (Cicadas)</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>30</th>\n      <td>https://www.olx.co.id/item/dijual-rumah-asri-daerah-bandung-iid-886886940</td>\n      <td>2400.0</td>\n      <td>150</td>\n      <td>398</td>\n      <td>3</td>\n      <td>1</td>\n      <td>2.0</td>\n      <td>Garasi, Garden, Carport</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Buahbatu (Margacinta)</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>35</th>\n      <td>https://www.olx.co.id/item/rumah-luas-asri-strategis-aman-banjir-iid-884663363</td>\n      <td>2000.0</td>\n      <td>320</td>\n      <td>352</td>\n      <td>4</td>\n      <td>3</td>\n      <td>1.0</td>\n      <td>Carport, Garasi, Garden, Gordyn</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Buahbatu (Margacinta)</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>45</th>\n      <td>https://www.olx.co.id/item/cigadung-raya-timur-hitung-tanah-iid-882085245</td>\n      <td>1600.0</td>\n      <td>150</td>\n      <td>317</td>\n      <td>4</td>\n      <td>2</td>\n      <td>1.0</td>\n      <td>Carport, PAM</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Antapani (Cicadas)</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n    <tr>\n      <th>46</th>\n      <td>https://www.olx.co.id/item/di-jual-rumah-konsep-villa-lokasi-dago-bandung-utara-iid-878472634</td>\n      <td>1900.0</td>\n      <td>150</td>\n      <td>310</td>\n      <td>3</td>\n      <td>3</td>\n      <td>2.0</td>\n      <td>AC, Garden, PAM, Water heater</td>\n      <td>SHM - Sertifikat Hak Milik</td>\n      <td>Batununggal</td>\n      <td>Bandung Kota</td>\n      <td>Jawa Barat</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n::: {.cell execution_count=9}\n``` {.python .cell-code}\nbandung_clean_agg[bandung_clean_agg['Kecamatan'].isin(kecamatans)]\n```\n\n::: {.cell-output .cell-output-display execution_count=90}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Kecamatan</th>\n      <th>price</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>13</th>\n      <td>Buahbatu (Margacinta)</td>\n      <td>103</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Antapani (Cicadas)</td>\n      <td>65</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>Batununggal</td>\n      <td>33</td>\n    </tr>\n    <tr>\n      <th>35</th>\n      <td>Sukajadi</td>\n      <td>25</td>\n    </tr>\n    <tr>\n      <th>37</th>\n      <td>Sumur Bandung</td>\n      <td>15</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>Bandung Kidul</td>\n      <td>12</td>\n    </tr>\n    <tr>\n      <th>28</th>\n      <td>Lengkong</td>\n      <td>12</td>\n    </tr>\n    <tr>\n      <th>20</th>\n      <td>Cimahi Utara</td>\n      <td>12</td>\n    </tr>\n    <tr>\n      <th>23</th>\n      <td>Coblong</td>\n      <td>11</td>\n    </tr>\n    <tr>\n      <th>0</th>\n      <td>Andir</td>\n      <td>10</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n::: {.cell execution_count=10}\n``` {.python .cell-code}\nplt.figure(figsize=(15, 8))\nsns.boxplot(\n    data=bandung_clean_kec,\n    x=\"price\",\n    y=\"Kecamatan\",\n)\n\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-11-output-1.png){width=1316 height=651}\n:::\n:::\n\n\nPersebaran harga ditiap tiap kecamata, kecamatan buahbatu memiliki outlier yang paling bangyak dibandingkan dengan kecamatan lain, namun karena kecamatan tersebut memiliki data yang paling besar, maka kita akan tetap gunakan kecamatan tersebut\n\n::: {.cell execution_count=11}\n``` {.python .cell-code}\nbandung_clean_kec = bandung_clean_kec.drop([\"link\", \"facility\", 'Kabupaten', 'Provinsi'], axis=1)\n```\n:::\n\n\n::: {.cell execution_count=12}\n``` {.python .cell-code}\nplt.figure(figsize= (15, 8))\nsns.heatmap(bandung_clean_kec.corr(numeric_only= True), annot= True)\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-13-output-1.png){width=1050 height=638}\n:::\n:::\n\n\nMenggunakan heatmap untuk melihat korelasi antar column, dapat dilihat luas bangunan memiliki korelasi yang paling kuat dengan harga, dan jumlah kamar memiliki korelasi yang paling rendah\n\n::: {.cell execution_count=13}\n``` {.python .cell-code}\n#ubah kecamatan menjadi kategori\nfor col in ['certificate', 'Kecamatan']:\n    bandung_clean_kec[col] = bandung_clean_kec[col].astype('category')\n```\n:::\n\n\n::: {.cell execution_count=14}\n``` {.python .cell-code}\nbandung_clean_kec.dtypes\n```\n\n::: {.cell-output .cell-output-display execution_count=95}\n```\nprice            float64\nsqr_building       int64\nsqr_land           int64\nbedroom            int64\nbathroom           int64\nfloor            float64\ncertificate     category\nKecamatan       category\ndtype: object\n```\n:::\n:::\n\n\n::: {.cell execution_count=15}\n``` {.python .cell-code}\nsns.pairplot(\n    bandung_clean_kec,\n)\n# to show\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-16-output-1.png){width=1418 height=1417}\n:::\n:::\n\n\nMelihat hasil pairplot pada price dan luas bangunan dan luas tanah. model regressi mungkin bisa kita gunakan\n\n::: {.cell execution_count=16}\n``` {.python .cell-code}\nplt.figure(figsize=(15, 8))\nsns.boxplot(\n    data=bandung_clean_kec,\n    x=\"price\",\n    y=\"certificate\",\n)\n\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-17-output-1.png){width=1361 height=651}\n:::\n:::\n\n\nmayoritas rumah yang dijual memiliki sertifikat SHM\n\n# Modeling\n\n::: {.cell execution_count=17}\n``` {.python .cell-code}\n#split data train - test\ndef split_input_output(data, target_column):\n    X = data.drop(columns = [target_column])\n    y = data[target_column]\n\n    return X, y\n\nX, y = split_input_output(data = bandung_clean_kec,\n                          target_column = \"price\")\n```\n:::\n\n\n::: {.cell execution_count=18}\n``` {.python .cell-code}\nX_train, X_test, y_train, y_test = train_test_split(X,\n                                                    y,\n                                                    test_size = 0.2,\n                                                    random_state = 123)\n```\n:::\n\n\n::: {.cell execution_count=19}\n``` {.python .cell-code}\nX_train_clean = (\n    pd.get_dummies(X_train, prefix=\"\")\n    .reset_index()\n    .drop(\n        [\"index\"],\n        axis=1,\n    )\n)\nX_train_clean\n```\n\n::: {.cell-output .cell-output-display execution_count=100}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>sqr_building</th>\n      <th>sqr_land</th>\n      <th>bedroom</th>\n      <th>bathroom</th>\n      <th>floor</th>\n      <th>_HGB - Hak Guna Bangun</th>\n      <th>_Lainnya (PPJB, Girik, Adat, dll)</th>\n      <th>_SHM - Sertifikat Hak Milik</th>\n      <th>_Andir</th>\n      <th>_Antapani (Cicadas)</th>\n      <th>_Bandung Kidul</th>\n      <th>_Batununggal</th>\n      <th>_Buahbatu (Margacinta)</th>\n      <th>_Cimahi Utara</th>\n      <th>_Coblong</th>\n      <th>_Lengkong</th>\n      <th>_Sukajadi</th>\n      <th>_Sumur Bandung</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>36</td>\n      <td>60</td>\n      <td>2</td>\n      <td>1</td>\n      <td>1.0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>130</td>\n      <td>140</td>\n      <td>4</td>\n      <td>2</td>\n      <td>2.0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>36</td>\n      <td>50</td>\n      <td>2</td>\n      <td>1</td>\n      <td>1.0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>156</td>\n      <td>84</td>\n      <td>3</td>\n      <td>2</td>\n      <td>2.0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>30</td>\n      <td>45</td>\n      <td>2</td>\n      <td>1</td>\n      <td>1.0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>233</th>\n      <td>92</td>\n      <td>105</td>\n      <td>3</td>\n      <td>2</td>\n      <td>2.0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>234</th>\n      <td>90</td>\n      <td>121</td>\n      <td>3</td>\n      <td>3</td>\n      <td>2.0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>235</th>\n      <td>100</td>\n      <td>205</td>\n      <td>2</td>\n      <td>2</td>\n      <td>2.0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>236</th>\n      <td>36</td>\n      <td>50</td>\n      <td>2</td>\n      <td>1</td>\n      <td>1.0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>237</th>\n      <td>135</td>\n      <td>118</td>\n      <td>3</td>\n      <td>2</td>\n      <td>1.0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n  </tbody>\n</table>\n<p>238 rows × 18 columns</p>\n</div>\n```\n:::\n:::\n\n\n::: {.cell execution_count=20}\n``` {.python .cell-code}\nfrom sklearn.ensemble import GradientBoostingRegressor\nfrom sklearn.model_selection import GridSearchCV \nfrom sklearn.metrics import mean_squared_error, r2_score, mean_absolute_error\n\nparams = {'n_estimators': [100, 200, 300, 400, 500],\n              'learning_rate': [0.1, 0.05, 0.01]}\n\n# Buat gridsearch\ngrad_tree = GradientBoostingRegressor(random_state = 123)\n\ngrad_tree_cv = GridSearchCV(estimator = grad_tree,\n                           param_grid = params,\n                           cv = 5,\n                           scoring = \"neg_mean_absolute_error\")\n# Fit grid search cv\ngrad_tree_cv.fit(X_train_clean, y_train)\n\n# Best params\ngrad_tree_cv.best_params_\n```\n\n::: {.cell-output .cell-output-display execution_count=101}\n```\n{'learning_rate': 0.05, 'n_estimators': 200}\n```\n:::\n:::\n\n\n::: {.cell execution_count=21}\n``` {.python .cell-code}\ngrad_tree = GradientBoostingRegressor(n_estimators = 200,\n                                      learning_rate=0.1,\n                                      random_state = 123)\n\ngrad_tree.fit(X_train_clean, y_train)\n```\n\n::: {.cell-output .cell-output-display execution_count=102}\n```{=html}\n<style>#sk-container-id-4 {color: black;background-color: white;}#sk-container-id-4 pre{padding: 0;}#sk-container-id-4 div.sk-toggleable {background-color: white;}#sk-container-id-4 label.sk-toggleable__label {cursor: pointer;display: block;width: 100%;margin-bottom: 0;padding: 0.3em;box-sizing: border-box;text-align: center;}#sk-container-id-4 label.sk-toggleable__label-arrow:before {content: \"▸\";float: left;margin-right: 0.25em;color: #696969;}#sk-container-id-4 label.sk-toggleable__label-arrow:hover:before {color: black;}#sk-container-id-4 div.sk-estimator:hover label.sk-toggleable__label-arrow:before {color: black;}#sk-container-id-4 div.sk-toggleable__content {max-height: 0;max-width: 0;overflow: hidden;text-align: left;background-color: #f0f8ff;}#sk-container-id-4 div.sk-toggleable__content pre {margin: 0.2em;color: black;border-radius: 0.25em;background-color: #f0f8ff;}#sk-container-id-4 input.sk-toggleable__control:checked~div.sk-toggleable__content {max-height: 200px;max-width: 100%;overflow: auto;}#sk-container-id-4 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {content: \"▾\";}#sk-container-id-4 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-4 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-4 input.sk-hidden--visually {border: 0;clip: rect(1px 1px 1px 1px);clip: rect(1px, 1px, 1px, 1px);height: 1px;margin: -1px;overflow: hidden;padding: 0;position: absolute;width: 1px;}#sk-container-id-4 div.sk-estimator {font-family: monospace;background-color: #f0f8ff;border: 1px dotted black;border-radius: 0.25em;box-sizing: border-box;margin-bottom: 0.5em;}#sk-container-id-4 div.sk-estimator:hover {background-color: #d4ebff;}#sk-container-id-4 div.sk-parallel-item::after {content: \"\";width: 100%;border-bottom: 1px solid gray;flex-grow: 1;}#sk-container-id-4 div.sk-label:hover label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-4 div.sk-serial::before {content: \"\";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: 0;}#sk-container-id-4 div.sk-serial {display: flex;flex-direction: column;align-items: center;background-color: white;padding-right: 0.2em;padding-left: 0.2em;position: relative;}#sk-container-id-4 div.sk-item {position: relative;z-index: 1;}#sk-container-id-4 div.sk-parallel {display: flex;align-items: stretch;justify-content: center;background-color: white;position: relative;}#sk-container-id-4 div.sk-item::before, #sk-container-id-4 div.sk-parallel-item::before {content: \"\";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: -1;}#sk-container-id-4 div.sk-parallel-item {display: flex;flex-direction: column;z-index: 1;position: relative;background-color: white;}#sk-container-id-4 div.sk-parallel-item:first-child::after {align-self: flex-end;width: 50%;}#sk-container-id-4 div.sk-parallel-item:last-child::after {align-self: flex-start;width: 50%;}#sk-container-id-4 div.sk-parallel-item:only-child::after {width: 0;}#sk-container-id-4 div.sk-dashed-wrapped {border: 1px dashed gray;margin: 0 0.4em 0.5em 0.4em;box-sizing: border-box;padding-bottom: 0.4em;background-color: white;}#sk-container-id-4 div.sk-label label {font-family: monospace;font-weight: bold;display: inline-block;line-height: 1.2em;}#sk-container-id-4 div.sk-label-container {text-align: center;}#sk-container-id-4 div.sk-container {/* jupyter's `normalize.less` sets `[hidden] { display: none; }` but bootstrap.min.css set `[hidden] { display: none !important; }` so we also need the `!important` here to be able to override the default hidden behavior on the sphinx rendered scikit-learn.org. See: https://github.com/scikit-learn/scikit-learn/issues/21755 */display: inline-block !important;position: relative;}#sk-container-id-4 div.sk-text-repr-fallback {display: none;}</style><div id=\"sk-container-id-4\" class=\"sk-top-container\"><div class=\"sk-text-repr-fallback\"><pre>GradientBoostingRegressor(n_estimators=200, random_state=123)</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br />On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class=\"sk-container\" hidden><div class=\"sk-item\"><div class=\"sk-estimator sk-toggleable\"><input class=\"sk-toggleable__control sk-hidden--visually\" id=\"sk-estimator-id-4\" type=\"checkbox\" checked><label for=\"sk-estimator-id-4\" class=\"sk-toggleable__label sk-toggleable__label-arrow\">GradientBoostingRegressor</label><div class=\"sk-toggleable__content\"><pre>GradientBoostingRegressor(n_estimators=200, random_state=123)</pre></div></div></div></div></div>\n```\n:::\n:::\n\n\n::: {.cell execution_count=22}\n``` {.python .cell-code}\ny_pred_train_gbcv = grad_tree.predict(X_train_clean)\n\n# Calculate mean absolute error\nmae_gb_cv = mean_absolute_error(y_train, y_pred_train_gbcv)\n\n# Calculate R-squared\nr2_gb_cv = r2_score(y_train, y_pred_train_gbcv)\n```\n:::\n\n\n::: {.cell execution_count=23}\n``` {.python .cell-code}\nprint(f'Score : {r2_gb_cv} \\n Mae :  {mae_gb_cv}')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nScore : 0.9881089521455664 \n Mae :  56.51410615809776\n```\n:::\n:::\n\n\n::: {.cell execution_count=24}\n``` {.python .cell-code}\nsns.scatterplot(x=y_train, y=y_pred_train_gbcv)\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-25-output-1.png){width=583 height=429}\n:::\n:::\n\n\n::: {.cell execution_count=25}\n``` {.python .cell-code}\nX_test_clean = (\n    pd.get_dummies(X_test, prefix=\"\")\n    .reset_index()\n    .drop(\n        [\"index\"],\n        axis=1,\n    )\n)\nX_test_clean.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=106}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>sqr_building</th>\n      <th>sqr_land</th>\n      <th>bedroom</th>\n      <th>bathroom</th>\n      <th>floor</th>\n      <th>_HGB - Hak Guna Bangun</th>\n      <th>_Lainnya (PPJB, Girik, Adat, dll)</th>\n      <th>_SHM - Sertifikat Hak Milik</th>\n      <th>_Andir</th>\n      <th>_Antapani (Cicadas)</th>\n      <th>_Bandung Kidul</th>\n      <th>_Batununggal</th>\n      <th>_Buahbatu (Margacinta)</th>\n      <th>_Cimahi Utara</th>\n      <th>_Coblong</th>\n      <th>_Lengkong</th>\n      <th>_Sukajadi</th>\n      <th>_Sumur Bandung</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>110</td>\n      <td>127</td>\n      <td>3</td>\n      <td>2</td>\n      <td>2.0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>90</td>\n      <td>137</td>\n      <td>3</td>\n      <td>2</td>\n      <td>1.0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>90</td>\n      <td>121</td>\n      <td>3</td>\n      <td>3</td>\n      <td>2.0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>30</td>\n      <td>45</td>\n      <td>2</td>\n      <td>1</td>\n      <td>1.0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>70</td>\n      <td>120</td>\n      <td>3</td>\n      <td>2</td>\n      <td>1.0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n::: {.cell execution_count=26}\n``` {.python .cell-code}\ny_pred_test_gbcv = grad_tree.predict(X_test_clean)\n\n# Calculate mean absolute error\ntest_mae_gb_cv = mean_absolute_error(y_test, y_pred_test_gbcv)\n\n# Calculate R-squared\ntest_r2_gb_cv = r2_score(y_test, y_pred_test_gbcv)\n\nprint(f'Score : {test_r2_gb_cv} \\n Mae :  {test_mae_gb_cv}')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nScore : 0.7066844439835633 \n Mae :  228.86587835362891\n```\n:::\n:::\n\n\n::: {.cell execution_count=27}\n``` {.python .cell-code}\nsns.scatterplot(x=y_test, y=y_pred_test_gbcv)\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](bandung_house_pricing_files/figure-html/cell-28-output-1.png){width=593 height=429}\n:::\n:::\n\n\n",
    "supporting": [
      "bandung_house_pricing_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}